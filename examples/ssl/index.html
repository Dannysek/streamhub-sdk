<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/src/css/style.css">
    <style>
    #listView {
        width:500px;
    }
    </style>
    <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
</head>
    <body>
        <div>
        <a href="javascript:void();" onclick="window.streamManager.get('main').start()">Start</a>
        <a href="javascript:void();" onclick="window.streamManager.get('main').stop()">Stop</a>
        </div>
        <div id="listView"></div>

        <script src="../../lib/requirejs/require.js" type="text/javascript"></script>
        <script src="/requirejs.conf.js" type="text/javascript"></script>
        <script>
        require([
            'streamhub-sdk/content/views/content-list-view',
            'streamhub-sdk/collection',
            'streamhub-sdk/content',
            'streamhub-sdk/collection/clients/bootstrap-client',
            'streamhub-sdk/collection/clients/stream-client'
        ],function (ListView, Collection, Content, BootstrapClient, StreamClient) {
            var listView = window.view = new ListView({
                showMore: 2,
                el: document.getElementById("listView")
            });

            var collection = window.collection =  new Collection({
                network: 'backplane-qa.fyre.co',
                siteId: '290598',
                articleId: '1',
                environment: 'qa-ext.livefyre.com',
                bootstrapClient: new BootstrapClient({
                    protocol: 'https'
                }) 
            });

            var createUpdater = collection.createUpdater;
            collection.createUpdater = function (opts) {
                opts = opts || {};
                opts.streamClient = new StreamClient({
                    protocol: 'https'
                });
                return createUpdater.call(this, opts);
            };

            collection.pipe(listView);

        });
        </script>
    </body>
</html>
